<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-dynamic-resolvers" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Dynamic Resolvers | Pathom 3</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://pathom3.wsscode.com/docs/dynamic-resolvers"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Dynamic Resolvers | Pathom 3"><meta data-rh="true" name="description" content="Dynamic resolvers feature in Pathom is currently in research/experimental stage, please"><meta data-rh="true" property="og:description" content="Dynamic resolvers feature in Pathom is currently in research/experimental stage, please"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://pathom3.wsscode.com/docs/dynamic-resolvers"><link data-rh="true" rel="alternate" href="https://pathom3.wsscode.com/docs/dynamic-resolvers" hreflang="en"><link data-rh="true" rel="alternate" href="https://pathom3.wsscode.com/docs/dynamic-resolvers" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://8YW0ZACTDN-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GZFCYV0DXN"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-GZFCYV0DXN",{})</script>


<link rel="search" type="application/opensearchdescription+xml" title="Pathom 3" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.5e9cce91.css">
<link rel="preload" href="/assets/js/runtime~main.7be6ae2a.js" as="script">
<link rel="preload" href="/assets/js/main.670c6fc5.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/icon_64x64.png" alt="Pathom 3" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/icon_64x64.png" alt="Pathom 3" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Pathom 3</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a href="https://blog.wsscode.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a class="navbar__item navbar__link" href="/media">Media</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/wilkerlucio/pathom3" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">Getting Started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/tutorial">Pathom Tutorial</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/nouns">Nouns</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/resolvers">Using Pathom</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/resolvers">Resolvers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/built-in-resolvers">Built-in Resolvers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/smart-maps">Smart Maps</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/eql">EQL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/environment">Environment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cache">Cache</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/placeholders">Placeholders</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/mutations">Mutations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/error-handling">Error Handling</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugins">Plugins</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/built-in-plugins">Built-in Plugins</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/async">Async</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/debugging">Debugging</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/foreign">Foreign Environments</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/dynamic-resolvers">Dynamic Resolvers</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/indexes">How Pathom Works</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/integrations/graphql">Integrations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/tutorials/hacker-news-scraper">Tutorials</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Using Pathom</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Dynamic Resolvers</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Dynamic Resolvers</h1></header><admonition type="danger"><p>Dynamic resolvers feature in Pathom is currently in research/experimental stage, please
avoid relying on this feature for critical parts of your system until there is time
to build confidence in it.</p></admonition><h2 id="what-are-dynamic-resolvers">What are dynamic resolvers?</h2><p>Dynamic resolvers is a feature of Pathom that enables the definition of remote complex
sources of information.</p><p>Dynamic resolvers are used for:</p><ul><li><a href="/docs/foreign">Integrate a Pathom instance with another Pathom instance</a></li><li><a href="https://github.com/wilkerlucio/pathom3-graphql">Integrate Pathom with GraphQL servers</a></li><li><a href="https://github.com/wilkerlucio/pathom3-datomic">Integrate Pathom with Datomic</a></li></ul><admonition type="important"><p>Dynamic resolvers are an advanced feature of Pathom, this page describes the motivations
and how it works, but for most users you can take full advantage of dynamic resolvers
using driver implementations like the ones linked before, without understand the
implementation details.</p></admonition><h2 id="what-dynamic-resolvers-can-do">What dynamic resolvers can do?</h2><p>To understand the problem dynamic resolvers solve, let&#x27;s first go through a manual
process call a remote Pathom service.</p><p>Here is the code for the remote service:</p><pre><code class="language-clojure">(ns com.wsscode.pathom3.docs.demos.core.dynamic-resolvers
  (:require
    [com.wsscode.pathom3.connect.built-in.resolvers :as pbir]
    [com.wsscode.pathom3.connect.foreign :as pcf]
    [com.wsscode.pathom3.connect.indexes :as pci]
    [com.wsscode.pathom3.connect.operation :as pco]
    [com.wsscode.pathom3.connect.operation.transit :as pcot]
    [com.wsscode.pathom3.connect.planner :as pcp]
    [com.wsscode.pathom3.interface.eql :as p.eql]
    [com.wsscode.transito :as transito]
    [org.httpkit.client :as http]
    [org.httpkit.server :as server]))

(defonce servers* (atom {}))

(defn make-server [port env]
  (if-let [s (get @servers* port)]
    (s))

  (let [request (p.eql/boundary-interface env)
        handler (fn [{:keys [body]}]
                  (let [req (transito/read-str (slurp body)
                              {:handlers pcot/read-handlers})]
                    {:status 200
                     :body   (transito/write-str
                               (request req)
                               {:handlers pcot/write-handlers})}))
        server  (server/run-server handler
                  {:port port})]
    (swap! servers* assoc port server)
    server))

(defn http-req [port req]
  (-&gt; @(http/request
         {:url    (str &quot;http://localhost:&quot; port)
          :method :post
          :body   (transito/write-str req {:handlers pcot/write-handlers})})
      :body
      slurp
      (transito/read-str {:handlers pcot/read-handlers})))

(defn http-interface [port env]
  (make-server port env)
  #(http-req port %))

(def users-data
  {1 {:user/id    1
      :user/name  &quot;Christop Rippin&quot;
      :company/id 1}
   2 {:user/id    2
      :user/name  &quot;Miss Annabell Kessler&quot;
      :company/id 1}
   3 {:user/id    3
      :user/name  &quot;Demarco Padberg&quot;
      :company/id 1}
   4 {:user/id    4
      :user/name  &quot;Daren Wolff Jr.&quot;
      :company/id 1}
   5 {:user/id    5
      :user/name  &quot;Carlo Schmitt&quot;
      :company/id 2}
   6 {:user/id    6
      :user/name  &quot;Meda Hegmann&quot;
      :company/id 2}
   7 {:user/id    7
      :user/name  &quot;Onie Schimmel&quot;
      :company/id 3}
   8 {:user/id    8
      :user/name  &quot;Mayra Raynor&quot;
      :company/id 3}
   9 {:user/id    9
      :user/name  &quot;Bobbie Grant&quot;
      :company/id 3}})

(def company-data
  {1 {:company/id   1
      :company/name &quot;Gladys King Inc&quot;}
   2 {:company/id   2
      :company/name &quot;Funk-Stamm&quot;}
   3 {:company/id   3
      :company/name &quot;Carter, Harber and Jacobi&quot;}})

(pco/defresolver all-users []
  {::pco/output
   [{:user/all
     [:user/id
      :user/name
      :company/id]}]}
  {:user/all
   (vec (vals users-data))})

(pco/defresolver user-by-id [{:user/keys [id]}]
  {::pco/output
   [:user/name
    :company/id]}
  (get users-data id))

(pco/defresolver company-by-id [{:company/keys [id]}]
  {::pco/output
   [:company/name]}
  (get company-data id))

(def env
  (-&gt; (pci/register
        [all-users
         user-by-id
         company-by-id])
      (pcp/with-plan-cache (atom {}))))

; this function will take a request and run though HTTP
(def request
  (http-interface 8087 env))
</code></pre><p>Now let&#x27;s consider we have a different server, and we want to consume and extend
the user data to add the <code>:user/ip</code> of each user.</p><p>In this case we are going get the information writing resolvers to forward some
queries to our previous server.</p><pre><code class="language-clojure">(def ips
  {1 &quot;82949-5679&quot;
   2 &quot;39359-0412&quot;
   3 &quot;40703-7676&quot;
   4 &quot;85822-1129&quot;
   5 &quot;03074-6343&quot;
   6 &quot;09986-9393&quot;
   7 &quot;74750-0040&quot;
   8 &quot;82239&quot;
   9 &quot;81444-2468&quot;})

(pco/defresolver remote-users
  &quot;Forward user list request to remote server&quot;
  []
  {::pco/output
   [{:user/all
     [:user/id
      :user/name
      :company/id]}]}
  (request
    [{:user/all
      [:user/id
       :user/name
       :company/id]}]))

(pco/defresolver remote-company
  &quot;Forward company data request to remote server&quot;
  [{:keys [company/id]}]
  {::pco/output
   [:company/name]}
  (request
    {:pathom/entity
     {:company/id id}

     :pathom/eql
     [:company/name]}))

(def client-env
  (-&gt; (pci/register
        [remote-users
         remote-company
         (pbir/static-attribute-map-resolver
           :user/id :user/ip ips)])
      (pcp/with-plan-cache (atom {}))))

(def client-request
  (p.eql/boundary-interface client-env))
</code></pre><p>With this setup we can run the following query combining the sources:</p><pre><code class="language-clojure">(client-request
  [{:user/all
    [:user/name
     :user/ip
     :company/name]}])
; {:user/all [{:user/name &quot;Onie Schimmel&quot;,
;              :user/ip &quot;74750-0040&quot;,
;              :company/name &quot;Carter, Harber and Jacobi&quot;}
;             {:user/name &quot;Christop Rippin&quot;,
;              :user/ip &quot;82949-5679&quot;,
;              :company/name &quot;Gladys King Inc&quot;}
;             {:user/name &quot;Daren Wolff Jr.&quot;,
;              :user/ip &quot;85822-1129&quot;,
;              :company/name &quot;Gladys King Inc&quot;}
;             {:user/name &quot;Meda Hegmann&quot;,
;              :user/ip &quot;09986-9393&quot;,
;              :company/name &quot;Funk-Stamm&quot;}
;             {:user/name &quot;Demarco Padberg&quot;,
;              :user/ip &quot;40703-7676&quot;,
;              :company/name &quot;Gladys King Inc&quot;}
;             {:user/name &quot;Miss Annabell Kessler&quot;,
;              :user/ip &quot;39359-0412&quot;,
;              :company/name &quot;Gladys King Inc&quot;}
;             {:user/name &quot;Bobbie Grant&quot;,
;              :user/ip &quot;81444-2468&quot;,
;              :company/name &quot;Carter, Harber and Jacobi&quot;}
;             {:user/name &quot;Carlo Schmitt&quot;,
;              :user/ip &quot;03074-6343&quot;,
;              :company/name &quot;Funk-Stamm&quot;}
;             {:user/name &quot;Mayra Raynor&quot;,
;              :user/ip &quot;82239&quot;,
;              :company/name &quot;Carter, Harber and Jacobi&quot;}]}
</code></pre><p>It works! But there are several inefficiencies in this process. For start let&#x27;s look
at the trace graph from this query:</p><p><img alt="Trace manual" src="/assets/images/trace-manual-9dba460673930da935470f28dc8e20ed.png" width="4084" height="1672"></p><p>The trace show us that to complete this request, it called the remote server four times.
One for the users, plus one per company (given we have 3 different companies).</p><p>Some key points:</p><ul><li>We have to manually integrate each resolver, which means every change on the server might require changes on the clients</li><li>Excessive round trips, which adds significant overhead</li></ul><p>Now try to imagine how this would scale, with hundreds of resolvers and maybe multiple
services.</p><p>That&#x27;s were dynamic resolvers come in. Dynamic resolvers can leverage the planning
algorithms of Pathom to calculate a request to an external service. When we think
about Pathom integrating with Pathom, this translates as having the external index,
but instead of processing it locally, its filtered and send to a remote service.</p><p>Let&#x27;s redo our client code, but this time using the foreign Pathom feature, which
provides tools to integrate a Pathom system with another:</p><pre><code class="language-clojure">(def ips
  {1 &quot;82949-5679&quot;
   2 &quot;39359-0412&quot;
   3 &quot;40703-7676&quot;
   4 &quot;85822-1129&quot;
   5 &quot;03074-6343&quot;
   6 &quot;09986-9393&quot;
   7 &quot;74750-0040&quot;
   8 &quot;82239&quot;
   9 &quot;81444-2468&quot;})

(def client-env
  (-&gt; (pci/register
        [; we use foreign-register which takes a function with a request, like the
         ; one we used to make the manual requests internally
         (pcf/foreign-register request)
         (pbir/static-attribute-map-resolver
           :user/id :user/ip ips)])
      (pcp/with-plan-cache (atom {}))))

(def client-request
  (p.eql/boundary-interface client-env))
</code></pre><p>Now let&#x27;s run the same query and check the trace:</p><p><img alt="Trace foreign" src="/assets/images/trace-foreign-a250f221fdee2ee37c5dffd516200a7d.png" width="4084" height="1672"></p><p>Note this time there was only a single request sent to the remote server. To handle
this Pathom is taking the query and the remote server in consideration to find the
optimal query to request, reducing the round trips.</p><h2 id="how-dynamic-resolvers-work">How dynamic resolvers work</h2><p>Dynamic resolvers have two main parts.</p><p>The first is the <code>dynamic resolver</code> itself, it&#x27;s like a normal resolver, but with
<code>::pco/dynamic-resolver? true</code>. One difference from static resolvers, is that dynamic resolvers
will also include a <code>foreign ast</code>. This AST describes the request for the dynamic
resolver to use.</p><p>The second part are <code>auxiliar resolvers</code>. Those resolvers don&#x27;t have an implementation,
they are used to calculate the sub-query to send to the dynamic resolver.</p><p>We can make an adaptation of our previous manual example to implement it using dynamic
resolvers:</p><pre><code class="language-clojure">(def remote-dynamic-resolvers
  [; 1 - the main resolver
   (pco/resolver &#x27;remote-dynamic
     {::pco/dynamic-resolver? true}
     (fn [env input]
       (request
         {:pathom/ast    (-&gt; env ::pcp/node ::pcp/foreign-ast)
          :pathom/entity input})))

   ; 2 - the auxiliary resolvers, note they reference the main one
   (pco/resolver &#x27;remote-user-by-id
     {::pco/input        [:user/id]
      ::pco/output       [:user/name :company/id]
      ::pco/dynamic-name &#x27;remote-dynamic})
   (pco/resolver &#x27;remote-company-by-id
     {::pco/input        [:company/id]
      ::pco/output       [:company/name]
      ::pco/dynamic-name &#x27;remote-dynamic})])

(def client-env2
  (-&gt; (pci/register
        [remote-dynamic-resolvers
         (pbir/static-attribute-map-resolver
           :user/id :user/ip ips)])
      (pcp/with-plan-cache (atom {}))))

(def client-request2
  (p.eql/boundary-interface client-env2))
</code></pre><p>We did a little change, we are going to get information from a single users, so it&#x27;s simpler
to inspect:</p><pre><code class="language-clojure">(client-request2
  {:pathom/entity
   {:user/id 1}

   :pathom/eql
   [:user/name
    :user/ip
    :company/name]})
</code></pre><p>In the following component you can see the final plan, and the steps to get to it.</p><div class="pathom-plan-view"><div class="loading-container">Loading viz data...</div></div><p>Try going back to the <code>=== Optimize ===</code> path, where you will be able to see three
nodes for <code>remote-dynamic</code>.</p><admonition type="tip"><p>Use the combobox on the left to switch between displaying the node resolver name
and the node id.</p></admonition><p>The merge at the step <code>Merge chained same dynamic resolvers.</code> is one interesting to note.</p><p>In this case the first node will get the <code>:company/id</code> from the <code>:user/id</code>, the second
will use the <code>:company/id</code> to fetch the <code>:company/name</code>.</p><p>In this situation, Pathom understands that this dynamic source already know about
the middle transitions, so we can remove the middle parts. This results in an end
node that will have <code>:user/id</code> as input and <code>:company/name</code> as the output, skipping
the <code>:company/id</code> fetch part.</p><p>A different kind of merging happens at the step <code>Merging sibling resolver calls to resolver remote-dynamic</code>.</p><p>This time is different, it&#x27;s a sibling relationship merge. In this case Pathom merges
the foreign ast of the nodes, combining then in a single request.</p><admonition type="tip"><p>Click on the nodes in the graph to see their data details, you can follow how they
change at each step of the graph definition.</p></admonition><h2 id="other-data-sources">Other data sources</h2><p>The previous example demonstrates how Pathom uses dynamic resolvers to combine request
demands of a foreign source.</p><p>One important thing to note is that the dynamic resolver idea is not be strict to Pathom
usages. Instead, you can think of a generic solution for sources that could support
this kind of request, or something adaptive.</p><p>The simplest example that supports this kind of shape query is GraphQL.</p><p>We can also use a shape like this to translate to other formats like SQL. The
Walkable library is a good example on how to translate a shape request into
something that&#x27;s not native adaptive to it, like SQL.</p><h3 id="graphql">GraphQL</h3><p>The library <a href="https://github.com/wilkerlucio/pathom3-graphql">Pathom 3 GraphQL</a> has an implementation to incorporate GraphQL
data sources into the Pathom system. Learn more at the <a href="./tutorials/graphql-integration">GraphQL tutorial</a>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/wilkerlucio/pathom3-docs/edit/master/docs/dynamic-resolvers.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/foreign"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Foreign Environments</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/indexes"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Indexes</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#what-are-dynamic-resolvers" class="table-of-contents__link toc-highlight">What are dynamic resolvers?</a></li><li><a href="#what-dynamic-resolvers-can-do" class="table-of-contents__link toc-highlight">What dynamic resolvers can do?</a></li><li><a href="#how-dynamic-resolvers-work" class="table-of-contents__link toc-highlight">How dynamic resolvers work</a></li><li><a href="#other-data-sources" class="table-of-contents__link toc-highlight">Other data sources</a><ul><li><a href="#graphql" class="table-of-contents__link toc-highlight">GraphQL</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Presentations</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.youtube.com/watch?v=YaHiff2vZ_o" target="_blank" rel="noopener noreferrer" class="footer__link-item">Data Navigation with Pathom 3<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/watch?v=IS3i3DTUnAI" target="_blank" rel="noopener noreferrer" class="footer__link-item">Conj 2019 - The Maximal Graph<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/watch?v=yyVKf2U8YVg" target="_blank" rel="noopener noreferrer" class="footer__link-item">Conj 2018 - Scaling Full Stack Applications<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/watch?v=r3zywlNflJI" target="_blank" rel="noopener noreferrer" class="footer__link-item">Dutch Clojure Days 2018 - Clojure Graph API’s<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://clojurians.slack.com/messages/pathom/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Wilker Lucio</div></div></div></footer></div>
<script src="/assets/js/runtime~main.7be6ae2a.js"></script>
<script src="/assets/js/main.670c6fc5.js"></script>
</body>
</html>