<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.64">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GZFCYV0DXN"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-GZFCYV0DXN",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Pathom 3" href="/opensearch.xml"><title data-react-helmet="true">GraphQL Integration | Pathom 3</title><meta data-react-helmet="true" name="docsearch:version" content="current,latest"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="GraphQL Integration | Pathom 3"><meta data-react-helmet="true" name="description" content="This tutorial will demonstrate how you can consume GraphQL services in Pathom, making"><meta data-react-helmet="true" property="og:description" content="This tutorial will demonstrate how you can consume GraphQL services in Pathom, making"><meta data-react-helmet="true" property="og:url" content="https://pathom3.wsscode.com/docs/tutorials/graphql-integration"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="true"><link data-react-helmet="true" rel="canonical" href="https://pathom3.wsscode.com/docs/tutorials/graphql-integration"><link rel="stylesheet" href="/styles.4444d5c6.css">
<link rel="preload" href="/styles.488f8ab7.js" as="script">
<link rel="preload" href="/runtime~main.9d86f839.js" as="script">
<link rel="preload" href="/main.74d805ea.js" as="script">
<link rel="preload" href="/1.4fb7aaf3.js" as="script">
<link rel="preload" href="/2.42aa7e8a.js" as="script">
<link rel="preload" href="/3.2067a2a7.js" as="script">
<link rel="preload" href="/1be78505.5d377af8.js" as="script">
<link rel="preload" href="/46.50848efd.js" as="script">
<link rel="preload" href="/935f2afb.b0430d98.js" as="script">
<link rel="preload" href="/17896441.0dd917d1.js" as="script">
<link rel="preload" href="/e2ec3fff.f64679c2.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/icon_64x64.png" alt="Pathom 3"><strong class="navbar__title">Pathom 3</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a href="https://blog.wsscode.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog</a><a class="navbar__item navbar__link" href="/media">Media</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/wilkerlucio/pathom3" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span><span class="DocSearch-Button-Key">⌘</span><span class="DocSearch-Button-Key">K</span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/icon_64x64.png" alt="Pathom 3"><strong class="navbar__title">Pathom 3</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Docs</a></li><li class="menu__list-item"><a href="https://blog.wsscode.com" target="_blank" rel="noopener noreferrer" class="menu__link">Blog</a></li><li class="menu__list-item"><a class="menu__link" href="/media">Media</a></li><li class="menu__list-item"><a href="https://github.com/wilkerlucio/pathom3" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/tutorial">Pathom Tutorial</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Using Pathom</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/resolvers">Resolvers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/built-in-resolvers">Built-in Resolvers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/smart-maps">Smart Maps</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/eql">EQL</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/environment">Environment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/cache">Cache</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/placeholders">Placeholders</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/mutations">Mutations</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/error-handling">Error Handling</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/plugins">Plugins</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/built-in-plugins">Built-in Plugins</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/async">Async</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/debugging">Debugging</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/foreign">Foreign Environments</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/dynamic-resolvers">Dynamic Resolvers</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">How Pathom Works</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/indexes">Indexes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/planner">Planner</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/shape-descriptor">Shape Descriptor</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Integrations</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/integrations/graphql">GraphQL</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Tutorials</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/hacker-news-scraper">Hacker News Scraper</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/serverless-pathom-gcf">Serverless Pathom with GCF</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/babashka">Scripting with Babashka</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/tutorials/graphql-integration">GraphQL Integration</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">GraphQL Integration</h1></header><div class="markdown"><p>This tutorial will demonstrate how you can consume GraphQL services in Pathom, making
it part of the attribute system.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="star-wars-api"></a>Star Wars API<a aria-hidden="true" tabindex="-1" class="hash-link" href="#star-wars-api" title="Direct link to heading">#</a></h2><p>To demonstrate this integration we are going to use the <a href="https://swapi-graphql.netlify.app/" target="_blank" rel="noopener noreferrer">Star Wars GraphQL API</a></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(ns com.wsscode.pathom3.docs.demos.tutorials.graphql</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  (:require</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    [clojure.data.json :as json]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    [com.wsscode.pathom3.graphql :as p.gql]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    [com.wsscode.pathom3.interface.eql :as p.eql]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    [org.httpkit.client :as http]))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">; first a helper function to request GraphQL queries to the Star Wars API</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(defn request-swapi-graphql [query]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  (-&gt; @(http/request</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         {:url     &quot;https://swapi-graphql.netlify.app/.netlify/functions/index&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          :method  :post</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          :headers {&quot;Content-Type&quot; &quot;application/json&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;Accept&quot;       &quot;*/*&quot;}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          :body    (json/write-str {:query query})})</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      :body</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      json/read-str))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">; lets create the environment</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(def env</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  (-&gt; {}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      ; this helper will pull the schema and register it in the environment</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      (p.gql/connect-graphql</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        {::p.gql/namespace &quot;swapi&quot;}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        request-swapi-graphql)))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(comment</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ; request all people and the title of the films they participate</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  (p.eql/process</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    env</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    [{:swapi.Root/allPeople</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      [{:swapi.PeopleConnection/people</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        [:swapi.Person/name</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         {:swapi.Person/filmConnection</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          [{:swapi.PersonFilmsConnection/films</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            [:swapi.Film/title]}]}]}]}]))</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="federating-over-multiple-graphql-services"></a>Federating over multiple GraphQL services<a aria-hidden="true" tabindex="-1" class="hash-link" href="#federating-over-multiple-graphql-services" title="Direct link to heading">#</a></h2><p>In this part we will see how we can use Pathom to connect data leveraging multiple
GraphQL services.</p><p>In this example we are going to use the <a href="https://tmdb.apps.quintero.io/" target="_blank" rel="noopener noreferrer">TMDB</a> which is an open GraphQL service for
movie data.</p><p>Although the SWAPI has some data about the movies, the TMDB has more data, like overview,
images, budget...</p><p>So how can we leverage this data to augment the information we have from the SWAPI?</p><p>The first thing we need is a way to associate the SWAPI video instance, with a Movie
entry on TMDB.</p><p>For this example I&#x27;ll use a simple table mapping, that maps ids from SWAPI to TMDB.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(def swapi-id-&gt;tmdb-id</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  {&quot;ZmlsbXM6MQ==&quot; &quot;MDoxMQ==&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   &quot;ZmlsbXM6Mg==&quot; &quot;MDoxODkx&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   &quot;ZmlsbXM6Mw==&quot; &quot;MDoxODky&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   &quot;ZmlsbXM6NA==&quot; &quot;MDoxODkz&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   &quot;ZmlsbXM6NQ==&quot; &quot;MDoxODk0&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   &quot;ZmlsbXM6Ng==&quot; &quot;MDoxODk1&quot;})</span></div></div></div></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>I got the TMDB id&#x27;s by manually searching for the Star Wars movies there. You could
as an exercise try to make this more automatic, maybe by using the movie number or
name to search from TMDB.</p></div></div><p>Now let&#x27;s include the TMDB setup in our environment and integrate the mapping:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">; refactor to simplify the definition of a graphql source</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(defn graphql-request [url query]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  (-&gt; @(http/request</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         {:url     url</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          :method  :post</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          :headers {&quot;Content-Type&quot; &quot;application/json&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;Accept&quot;       &quot;*/*&quot;}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          :body    (json/write-str {:query query})})</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      :body</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      json/read-str))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">; SWAPI request</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(def request-swapi</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  #(graphql-request &quot;https://swapi-graphql.netlify.app/.netlify/functions/index&quot; %))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">; TMDB request</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(def request-tmdb</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  #(graphql-request &quot;https://tmdb.apps.quintero.io/&quot; %))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(def swapi-id-&gt;tmdb-id</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  {&quot;ZmlsbXM6MQ==&quot; &quot;MDoxMQ==&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   &quot;ZmlsbXM6Mg==&quot; &quot;MDoxODkx&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   &quot;ZmlsbXM6Mw==&quot; &quot;MDoxODky&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   &quot;ZmlsbXM6NA==&quot; &quot;MDoxODkz&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   &quot;ZmlsbXM6NQ==&quot; &quot;MDoxODk0&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   &quot;ZmlsbXM6Ng==&quot; &quot;MDoxODk1&quot;})</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(def env</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  (-&gt; {}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      (pci/register</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        ; apply the static mapping using a built-in resolver helper</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        [(pbir/static-attribute-map-resolver :swapi.Film/id :tmdb.Node/id</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           swapi-id-&gt;tmdb-id)])</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      (p.gql/connect-graphql</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        {::p.gql/namespace &quot;swapi&quot;}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        request-swapi)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      (p.gql/connect-graphql</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        {::p.gql/namespace &quot;tmdb&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         ::p.gql/ident-map {&quot;node&quot; {&quot;id&quot; [&quot;Node&quot; &quot;id&quot;]}}}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        request-tmdb)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      ; let&#x27;s integrate pathom viz so we can explore our data, note you need to add the</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      ; pathom connector dependency to your project https://github.com/wilkerlucio/pathom-viz-connector</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      ((requiring-resolve &#x27;com.wsscode.pathom.viz.ws-connector.pathom3/connect-env)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       &quot;gqldemo&quot;)))</span></div></div></div></div></div><p>Using Pathom Viz, we can use the auto-complete to explore our new possibilities:</p><p><img alt="Integrated options" src="/assets/images/autocomplete-ebfe4f0a58b57a1fea4814292a38a1ae.png"></p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>The reason we see other types like <code>TVShow</code> is due to the fact the entry point for an
entity in TMDB is a generic type called <code>Node</code>, which means any type that implements
this interface might be a valid option here, and in this case Pathom will offer all the possible
options.</p><p>Pathom will automatically group the attributes when sending to GraphQL using the
<code>... on TYPE { attr attr2 } </code> syntax, and since in Pathom we have the full type name on
each attribute that grouping is based on looking at the last namespace part in the
attribute name.</p></div></div><p>An example query getting the title from SWAPI, while overview and budget from TMDB:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">[{:swapi.Root/allFilms</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  [{:swapi.FilmsConnection/films</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    [:swapi.Film/title</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     :tmdb.Movie/budget</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     :tmdb.Movie/overview]}]}]</span></div></div></div></div></div><p><img alt="Integrated query" src="/assets/images/query-803f5c9022f5b16e50d8b9dcff9787e2.png"></p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>In this scenario we see an N+1 issue. In the future this should be optimized internally
and the same process should be resolved with just one request for each GraphQL
service.</p><p>You can track this at: <a href="https://github.com/wilkerlucio/pathom3-graphql/issues/11" target="_blank" rel="noopener noreferrer">https://github.com/wilkerlucio/pathom3-graphql/issues/11</a></p></div></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/wilkerlucio/pathom3-docs/edit/master/docs/tutorials/graphql-integration.mdx" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/tutorials/babashka"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Scripting with Babashka</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#star-wars-api" class="table-of-contents__link">Star Wars API</a></li><li><a href="#federating-over-multiple-graphql-services" class="table-of-contents__link">Federating over multiple GraphQL services</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Presentations</h4><ul class="footer__items"><li class="footer__item"><a href="https://www.youtube.com/watch?v=IS3i3DTUnAI" target="_blank" rel="noopener noreferrer" class="footer__link-item">Conj 2019 - The Maximal Graph</a></li><li class="footer__item"><a href="https://www.youtube.com/watch?v=yyVKf2U8YVg" target="_blank" rel="noopener noreferrer" class="footer__link-item">Conj 2018 - Scaling Full Stack Applications</a></li><li class="footer__item"><a href="https://www.youtube.com/watch?v=r3zywlNflJI" target="_blank" rel="noopener noreferrer" class="footer__link-item">Dutch Clojure Days 2018 - Clojure Graph API’s</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://clojurians.slack.com/messages/pathom/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack</a></li></ul></div></div><div class="text--center"><div>Copyright © 2021 Wilker Lucio</div></div></div></footer></div>
<script src="/styles.488f8ab7.js"></script>
<script src="/runtime~main.9d86f839.js"></script>
<script src="/main.74d805ea.js"></script>
<script src="/1.4fb7aaf3.js"></script>
<script src="/2.42aa7e8a.js"></script>
<script src="/3.2067a2a7.js"></script>
<script src="/1be78505.5d377af8.js"></script>
<script src="/46.50848efd.js"></script>
<script src="/935f2afb.b0430d98.js"></script>
<script src="/17896441.0dd917d1.js"></script>
<script src="/e2ec3fff.f64679c2.js"></script>
</body>
</html>