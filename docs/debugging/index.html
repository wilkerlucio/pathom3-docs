<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.64">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GZFCYV0DXN"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-GZFCYV0DXN",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Pathom 3" href="/opensearch.xml"><title data-react-helmet="true">Debugging | Pathom 3</title><meta data-react-helmet="true" name="docsearch:version" content="current,latest"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Debugging | Pathom 3"><meta data-react-helmet="true" name="description" content="On this page, you will find information on how to debug problems using Pathom 3."><meta data-react-helmet="true" property="og:description" content="On this page, you will find information on how to debug problems using Pathom 3."><meta data-react-helmet="true" property="og:url" content="https://pathom3.wsscode.com/docs/debugging"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="true"><link data-react-helmet="true" rel="canonical" href="https://pathom3.wsscode.com/docs/debugging"><link rel="stylesheet" href="/styles.4444d5c6.css">
<link rel="preload" href="/styles.7bd4c1d1.js" as="script">
<link rel="preload" href="/runtime~main.20994844.js" as="script">
<link rel="preload" href="/main.b951b7af.js" as="script">
<link rel="preload" href="/1.2e2774a7.js" as="script">
<link rel="preload" href="/2.8a5fdb16.js" as="script">
<link rel="preload" href="/3.c43cf402.js" as="script">
<link rel="preload" href="/1be78505.9817f03c.js" as="script">
<link rel="preload" href="/43.d6df2bea.js" as="script">
<link rel="preload" href="/935f2afb.736e8c56.js" as="script">
<link rel="preload" href="/17896441.01d25d16.js" as="script">
<link rel="preload" href="/b1146c8f.9a37b72d.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/icon_64x64.png" alt="Pathom 3"><strong class="navbar__title">Pathom 3</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a href="https://blog.wsscode.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog</a><a class="navbar__item navbar__link" href="/media">Media</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/wilkerlucio/pathom3" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span><span class="DocSearch-Button-Key">âŒ˜</span><span class="DocSearch-Button-Key">K</span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/icon_64x64.png" alt="Pathom 3"><strong class="navbar__title">Pathom 3</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Docs</a></li><li class="menu__list-item"><a href="https://blog.wsscode.com" target="_blank" rel="noopener noreferrer" class="menu__link">Blog</a></li><li class="menu__list-item"><a class="menu__link" href="/media">Media</a></li><li class="menu__list-item"><a href="https://github.com/wilkerlucio/pathom3" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/tutorial">Pathom Tutorial</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Using Pathom</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/resolvers">Resolvers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/built-in-resolvers">Built-in Resolvers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/smart-maps">Smart Maps</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/eql">EQL</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/environment">Environment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cache">Cache</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/placeholders">Placeholders</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/mutations">Mutations</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/error-handling">Error Handling</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugins">Plugins</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/built-in-plugins">Built-in Plugins</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/async">Async</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/debugging">Debugging</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">How Pathom Works</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/indexes">Indexes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/planner">Planner</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/shape-descriptor">Shape Descriptor</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Tutorials</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tutorials/hacker-news-scraper">Hacker News Scraper</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tutorials/serverless-pathom-gcf">Serverless Pathom with GCF</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tutorials/babashka">Scripting with Babashka</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Debugging</h1></header><div class="markdown"><p>On this page, you will find information on how to debug problems using Pathom 3.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="repl-debug"></a>REPL debug<a aria-hidden="true" tabindex="-1" class="hash-link" href="#repl-debug" title="Direct link to heading">#</a></h2><p>First, we will see how to inspect the stats of a Pathom process using the REPL.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="pathom-run-stats"></a>Pathom Run Stats<a aria-hidden="true" tabindex="-1" class="hash-link" href="#pathom-run-stats" title="Direct link to heading">#</a></h3><p>When Pathom runs, it also generates some data
about what happened on top of developing your response. This data includes the plan generated for your request and details about what happened to run each node in this graph.</p><p>You can find this data living the <code>meta</code> data of the returned map. This works for the
<a href="/docs/eql">EQL</a> interface and if you use the runner directly. To see this data with
<a href="/docs/smart-maps">Smart Maps</a> you should use the <code>psm/get-with-stats</code> helper.</p><p>Let&#x27;s have a look at what is inside this data, and this is our source example:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(pco/defresolver area [{:keys [width height]}]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  {:area (* width height)})</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(pco/defresolver width [{:keys [x x2]}]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  {:width (- x2 x)})</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(def env</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  (pci/register</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    [area width]))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(p.eql/process</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  env</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  {:x 10 :x2 30 :height 40}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  [:area])</span></div></div></div></div></div><p>The result map is <code>{:area 800}</code>. Now let&#x27;s look at what is in <code>meta</code>:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{::pcr/run-stats</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> {::pcr/compute-plan-run-start-ms</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  3.701837395085457E9</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ::pcr/compute-plan-run-finish-ms</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  3.701837397421086E9</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ::pcr/graph-run-start-ms</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  3.701837395080634E9</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ::pcr/graph-run-finish-ms</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  3.701837399062158E9</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ::pcr/node-run-stats</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  {2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   {::pcr/resolver-run-start-ms  3.701837397955496E9</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ::pcr/resolver-run-finish-ms 3.701837397997367E9</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ::pcr/node-run-input         {:x 10, :x2 30}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ::pcr/node-run-output        {:width 20}}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   {::pcr/resolver-run-start-ms  3.701837398639112E9</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ::pcr/resolver-run-finish-ms 3.701837398674007E9</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ::pcr/node-run-input         {:width 20, :height 40}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ::pcr/node-run-output        {:area 800}}}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ::pcp/index-ast</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  {:area {:type :prop, :dispatch-key :area, :key :area}}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ::pcp/index-attrs</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  {:width #{2}, :area #{1}}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ::pcp/index-resolver-&gt;nodes</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  {com.wsscode.pathom3.demos.troubleshoot/area  #{1}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   com.wsscode.pathom3.demos.troubleshoot/width #{2}}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ::pcp/root</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ::pcp/nodes</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  {1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   {::pco/op-name          com.wsscode.pathom3.demos.troubleshoot/area</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ::pcp/node-id          1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ::pcp/expects          {:area {}}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ::pcp/input            {:width {}, :height {}}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ::pcp/node-parents     #{2}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ::pcp/source-for-attrs #{:area}}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   {::pco/op-name          com.wsscode.pathom3.demos.troubleshoot/width</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ::pcp/node-id          2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ::pcp/expects          {:width {}}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ::pcp/input            {:x {}, :x2 {}}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ::pcp/source-for-attrs #{:width}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ::pcp/run-next         1}}}}</span></div></div></div></div></div><div class="admonition admonition-important alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>important</h5></div><div class="admonition-content"><p>Take some time to read the available data from stats. If the name of some attribute
doesn&#x27;t make sense to you, navigate to the spec definition of that property to find
a text description of it.</p></div></div><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>Note we have a mix of <code>::pcp</code> (planner) and <code>::pcr</code> (runner) keys in this map root. The
namespace is an indication of what part of the system owns that key.</p></div></div><p>On top of the plan data, the runner data includes runtime information about the execution.
This data contains timestamps for many events and specialized data depending on the kind of node.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="looking-for-issues"></a>Looking for issues<a aria-hidden="true" tabindex="-1" class="hash-link" href="#looking-for-issues" title="Direct link to heading">#</a></h4><p>Let&#x27;s write a broken query to debug it:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(-&gt; (p.eql/process</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      env</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      {:x 10 :height 40}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      [:area])</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    (meta)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ::pcr/run-stats)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">=&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{::pcp/index-ast                  {:area {:dispatch-key :area,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                          :key          :area,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                          :type         :prop}},</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ::pcp/nodes                      {},</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ::pcp/unreachable-paths          {:area {}, :width {}, :x2 {}},</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ::pcp/unreachable-resolvers      #{com.wsscode.pathom3.docs.demos.core.debugging/width</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                    com.wsscode.pathom3.docs.demos.core.debugging/area},</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ::pcr/compute-plan-run-finish-ms 1.017579107877868E9,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ::pcr/compute-plan-run-start-ms  1.017579107436291E9,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ::pcr/graph-run-finish-ms        1.017579107898803E9,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ::pcr/graph-run-start-ms         1.017579107430066E9,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ::pcr/node-run-stats             {}}</span></div></div></div></div></div><p>Most notably, check <code>::pcp/unreachable-paths</code> and <code>::pcp/unreachable-resolvers</code>. Looking
at then we can see what Pathom tried but failed to accomplish. This a good time to look
for typos or check if there is missing information on your data.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="smart-stats"></a>Smart Stats<a aria-hidden="true" tabindex="-1" class="hash-link" href="#smart-stats" title="Direct link to heading">#</a></h3><p>During process time, Pathom collects the minimum data as it can to reduce the
overhead. So, for example, it won&#x27;t calculate durations during this process. Simultaneously, if the data were available as simple props, that would also be great.</p><p>To get the best of both worlds, Pathom provides resolvers that do these interesting
computations. Using those with a Smart Map gives easy access to these attributes while
adding zero cost at processing time.</p><p>An easy helper to start a smart stats is available at the Smart Maps namespace. Here is an example to fetch the total process duration from run stats:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(-&gt; (p.eql/process</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      env</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      {:x 10 :x2 30 :height 40}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      [:area])</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    (meta)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ::pcr/run-stats</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    (psm/smart-run-stats)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ::pcr/process-run-duration-ms)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">; =&gt; 0.6624890565872192</span></div></div></div></div></div><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>You can use datafy to explore the available attributes from the
smart stats (as you can with any Smart Map):</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(-&gt; (p.eql/process</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      env</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      {:x 10 :x2 30 :height 40}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      [:area])</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    (meta)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ::pcr/run-stats</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    (psm/smart-run-stats)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    clojure.datafy/datafy)</span></div></div></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="error-for-some-attribute"></a>Error for some attribute<a aria-hidden="true" tabindex="-1" class="hash-link" href="#error-for-some-attribute" title="Direct link to heading">#</a></h3><p>In many cases, what you care about is the status of some specific attribute. Errors get
located in the run stats of the node. The graph has the <code>::pcp/index-attrs</code>, which tells
which node is responsible for a given attribute.</p><p>Here is an example of an execution with error. We&#x27;re going to put a string where it should
be a number, causing a math exception:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(p.eql/process</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  env</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  {:x 10 :x2 &quot;foo&quot; :height 40}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  [:area])</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">=&gt; {}</span></div></div></div></div></div><p>We can see the response is silent in the output, but looking at meta
we can see the diagnostics:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(-&gt; (p.eql/process</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      env</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      {:x 10 :x2 &quot;foo&quot; :height 40}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      [:area])</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    (meta)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ::pcr/run-stats)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">=&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{::pcp/index-attrs                {:width #{2}, :area #{1}},</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ::pcr/compute-plan-run-finish-ms 1.019610883512772E9,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ::pcr/graph-run-finish-ms        1.01961088367712E9,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ::pcr/compute-plan-run-start-ms  1.019610883061625E9,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ::pcp/root                       2,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ::pcr/node-run-stats             {2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                   #::pcr{:node-run-start-ms      1.019610883534996E9,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                          :node-error             #error{:cause &quot;class java.lang.String cannot be cast to class java.lang.Number (java.lang.String and java.lang.Number are in module java.base of loader &#x27;bootstrap&#x27;)&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                                                         :via   [{:type    java.lang.ClassCastException,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                                                                  :message &quot;class java.lang.String cannot be cast to class java.lang.Number (java.lang.String and java.lang.Number are in module java.base of loader &#x27;bootstrap&#x27;)&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                                                                  :at      [clojure.lang.Numbers</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                                                                            minus</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                                                                            &quot;Numbers.java&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                                                                            162]}],</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                                                         :trace ...},</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                          :resolver-run-start-ms  1.019610883569344E9,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                          :resolver-run-finish-ms 1.019610883641287E9,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                          :node-resolver-input    {:x  10,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                                                   :x2 &quot;foo&quot;},</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                          :node-resolver-output   ::pcr/node-error,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                          :node-run-finish-ms     1.019610883656152E9},</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                   ::pcr/nodes-with-error</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                   #{2}},</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ::pcp/index-ast                  {:area {:type         :prop,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                          :dispatch-key :area,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                          :key          :area}},</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ::pcr/graph-run-start-ms         1.019610883053178E9,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ::pcp/index-resolver-&gt;nodes      #:com.wsscode.pathom3.docs.demos.core.debugging{area  #{1},</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                                                                  width #{2}},</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ::pcp/nodes                      {1 {::pco/op-name          com.wsscode.pathom3.docs.demos.core.debugging/area,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                      ::pcp/node-id          1,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                      ::pcp/expects          {:area {}},</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                      ::pcp/input            {:width  {},</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                                              :height {}},</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                      ::pcp/node-parents     #{2},</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                      ::pcp/source-for-attrs #{:area}},</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                   2 {::pco/op-name          com.wsscode.pathom3.docs.demos.core.debugging/width,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                      ::pcp/node-id          2,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                      ::pcp/expects          {:width {}},</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                      ::pcp/input            {:x  {},</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                                              :x2 {}},</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                      ::pcp/source-for-attrs #{:width},</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                      ::pcp/run-next         1}}}</span></div></div></div></div></div><p>We wanted the attribute <code>:area</code>, at the <code>::pcp/index-attrs</code> we can see the node for it
is the node <code>1</code>. We can also see the error in the stats but at the node <code>2</code>.</p><p>This is why just looking at the node responsible is a naive solution. The correct solution
to look at the node first, and if the error isn&#x27;t there, traverse back the graph to
find the issue.</p><p>Pathom provides a solution built-in to handle that, the function <code>attribute-error</code>
in the <code>com.wsscode.pathom3.error</code> namespace:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(-&gt; (p.eql/process</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      env</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      {:x 10 :x2 &quot;foo&quot; :height 40}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      [:area])</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    (p.error/attribute-error :area))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">=&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#:com.wsscode.pathom3.error{:error-type         :com.wsscode.pathom3.error/node-errors,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                            :node-error-details {1 #:com.wsscode.pathom3.error{:error-type        :com.wsscode.pathom3.error/ancestor-error,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                                                               :error-ancestor-id 2,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                                                               :exception         ...error...}}}</span></div></div></div></div></div><p>The <code>::pcrs/error-type</code> may be:</p><ul><li><code>::pcrs/node-error-type-direct</code>: error happened in the node responsible for the attribute</li><li><code>::pcrs/node-error-type-ancestor</code>: error happened in some ancestor</li><li><code>::pcrs/node-error-type-unreachable</code>: can&#x27;t figure a path to reach this attribute</li></ul><p>In the case of <code>::pcrs/node-error-type-ancestor</code>, there will be a <code>::pcrs/node-error-id</code>
to tell which node was responsible for the failure.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Smart Run Stats is a good example of how you can use Pathom Smart Maps to have lazy access
to derived data, instead of doing eager computations.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="debug-with-pathom-viz"></a>Debug with Pathom Viz<a aria-hidden="true" tabindex="-1" class="hash-link" href="#debug-with-pathom-viz" title="Direct link to heading">#</a></h2><div class="pathom-diagram"><p>  <img alt="Pathom Viz" src="/assets/images/pathom-viz-cebb84b67563fd3911cbe8b233c751f4.png"></p></div><p><a href="https://github.com/wilkerlucio/pathom-viz/" target="_blank" rel="noopener noreferrer">Pathom Viz</a> is a developer app created to
assist in the development with Pathom. In Pathom Viz you can:</p><ul><li>Run queries with an auto-complete feature in the tool editor</li><li>Trace the requests to understand the bottlenecks of the process</li><li>Explore the app index with Index Explorer</li><li>Track all requests made to your app, and see trace details of those</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="download-the-app"></a>Download the app<a aria-hidden="true" tabindex="-1" class="hash-link" href="#download-the-app" title="Direct link to heading">#</a></h3><p>You can download Pathom Viz at the <a href="https://github.com/wilkerlucio/pathom-viz/releases/" target="_blank" rel="noopener noreferrer">releases page</a>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mac-os-notes"></a>Mac OS Notes<a aria-hidden="true" tabindex="-1" class="hash-link" href="#mac-os-notes" title="Direct link to heading">#</a></h4><p>Notice that I don&#x27;t have an Apple ID so I can&#x27;t sign the app on the Mac version, to run the app:</p><ul><li>Download the <code>.dmg</code> file</li><li>Open and drag pathom to the Applications</li><li>Open the Applications folder on Finder</li><li>Attempt to open the app (you will see a message saying the app isn&#x27;t signed, options to delete or cancel)</li><li>Right-click on it and click open (this is important, don&#x27;t just double-click on it)</li><li>It may show the <code>Open</code> button on the dialog. If not, repeat the previous step, and it should appear</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="connect-the-app"></a>Connect the app<a aria-hidden="true" tabindex="-1" class="hash-link" href="#connect-the-app" title="Direct link to heading">#</a></h3><p>The next step is to connect your <a href="/docs/environment">environment</a> with the app.</p><p>First you have to include the <a href="https://github.com/wilkerlucio/pathom-viz-connector" target="_blank" rel="noopener noreferrer">Pathom Viz Connector</a>
dependency to your project:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{:deps {com.wsscode/pathom-viz-connector</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        {:mvn/version &quot;2021.04.20&quot;}}}</span></div></div></div></div></div><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>You can also do it with a local deps aliases:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{:aliases</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> {:dev/pathom-tools</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  {:extra-deps</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    {com.wsscode/pathom-viz-connector</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     {:mvn/version &quot;2021.04.20&quot;}}}}}</span></div></div></div></div></div></div></div><p>If you didn&#x27;t open the Pathom Viz app yet, do it now.</p><p>Then, set up your environment to connect with the app:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(ns com.wsscode.pathom-viz.connector.demos.pathom3</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  (:require [com.wsscode.pathom.viz.ws-connector.core :as pvc]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            [com.wsscode.pathom.viz.ws-connector.pathom3 :as p.connector]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            [com.wsscode.pathom3.connect.built-in.resolvers :as pbir]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            [com.wsscode.pathom3.connect.indexes :as pci]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            [com.wsscode.pathom3.interface.eql :as p.eql]))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">; you can use goog.defines on ClojureScript or env vars in Clojure</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">; the important part is to have a flag to decide when to connect the parser</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(def CONNECT_PARSER? true)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(def registry</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  [(pbir/constantly-resolver :pi Math/PI)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   (pbir/single-attr-resolver :pi :tau #(* 2 %))])</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(def env</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  (cond-&gt; (pci/register registry)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    CONNECT_PARSER?</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ; give your environment a unique parser-id, this will ensure reconnects work as</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ; expected</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    (p.connector/connect-env {::pvc/parser-id `env})))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(comment</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  (p.eql/process env</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    [:tau]))</span></div></div></div></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>The attribute name <code>::pvc/parser-id</code> is an inheritance from Pathom 2, keeping this
name for compatibility.</p></div></div><p>Once you load this file, you should see a new tab appearing in Pathom Viz:</p><div class="pathom-diagram"><p>  <img alt="Pathom Viz" src="/assets/images/connect-35127a5aba4c604a00223928ec44fee5.gif"></p></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="query-editor"></a>Query Editor<a aria-hidden="true" tabindex="-1" class="hash-link" href="#query-editor" title="Direct link to heading">#</a></h3><p>The query editor provides an environment to run queries using your connected environment.</p><div class="pathom-diagram"><p>  <img alt="Pathom Viz" src="/assets/images/query-editor-2f467fac8b3047590a6908dbfae93c8d.png"></p></div><p>The query editor provides auto-complete for exploration:</p><div class="pathom-diagram"><p>  <img alt="Pathom Viz" src="/assets/images/query-editor-auto-complete-35b14ca4f5b723532e66633b28355a68.png"></p></div><p>The auto-complete is contextual. This means depending on which part of the query you are,
Pathom Viz will offer different attribute suggestions.</p><p>When you run a query, the result will appear on the right, and the query is saved to
a query history.</p><p>Bellow the results there is the trace viewer, described in the next section.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="tracer-view"></a>Tracer View<a aria-hidden="true" tabindex="-1" class="hash-link" href="#tracer-view" title="Direct link to heading">#</a></h3><p>The tracer view displays a timeline of the things that happened during the query process.</p><div class="pathom-diagram"><p>  <img alt="Pathom Viz" src="/assets/images/trace-view-f89791bf7805a63c26778002c7e3b052.png"></p></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="trace-blocks"></a>Trace blocks<a aria-hidden="true" tabindex="-1" class="hash-link" href="#trace-blocks" title="Direct link to heading">#</a></h4><p>Each gray block in the timeline can be one of:</p><ol><li>A graph process: the first short bar is one, but also when a process trigger sub-processes, each sub-process has its graph bar</li><li>Node execution: these bars go below the graph process and represent the execution of a node in the graph</li></ol><p>Inside the bars, you will see events that cover part of it.</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>Mouse over the events to see more details and the precise duration of each.</p><p>In that hint, you can see the times for each event under the mouse. You will also see
one or two badges on the right side.</p><p>The green one is the number of events in that block. The yellow one
tells how many direct children this block has (this is absent when the number of
children are zero).</p></div></div><p>You will see some different colors filling the blocks. These are their meaning:</p><ul><li>Green: generic events</li><li>Purple: resolver call</li><li>Red: failed operation</li><li>Blue: batch resolver call</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="nested-traces"></a>Nested traces<a aria-hidden="true" tabindex="-1" class="hash-link" href="#nested-traces" title="Direct link to heading">#</a></h4><p>When Pathom process a sub-query, that nested details are placed below the block, they
happened. In this case, you will see a <code>+</code> OR <code>-</code> icon on the left side of the block.</p><p>Use this to toggle the visibility of the children&#x27;s blocks.</p><div class="pathom-diagram"><p>  <img alt="Pathom Viz" src="/assets/images/trace-nested-1a795ac5a409824dd58c4cc54862ee86.png"></p></div><p>When you mouse over a block with children, Pathom Viz creates a box around that to
make it easier to see the boundaries of it.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="view-the-graph"></a>View the graph<a aria-hidden="true" tabindex="-1" class="hash-link" href="#view-the-graph" title="Direct link to heading">#</a></h4><p>By clicking on a block you can see the node of that block, and the plan in which it
was projected. This will open the Graph View, described in the next section.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="graph-view"></a>Graph View<a aria-hidden="true" tabindex="-1" class="hash-link" href="#graph-view" title="Direct link to heading">#</a></h3><p>When you click on a block in the Trace View, it opens the graph view below it:</p><div class="pathom-diagram"><p>  <img alt="Pathom Viz" src="/assets/images/graph-view-d03901c07eaf80f1459bfd027ed6ba2b.png"></p></div><p>This graph represents what the <a href="/docs/planner">planner</a> generated for this execution.</p><p>If you clicked on a graph block, the graph opens without any node selected. In case
you clicked on a node block that nodes start in focus on the graph, marked by a red
border.</p><p>You will see different colors for nodes, here are their meaning:</p><ul><li>Green: a node executed with success</li><li>Gray: a node that didn&#x27;t run</li><li>Yellow: a node that ran but got an empty response</li><li>Red: a node that failed to run</li><li>Purple: <code>AND</code> node</li><li>Blue: <code>OR</code> node</li></ul><p>A node with a black border means it&#x27;s the root of the graph.</p><p>There are also different kinds of edges between the nodes:</p><ul><li>Orange edges: these happen on <code>AND</code> and <code>OR</code> nodes, which means the branches of this composing node</li><li>Black edge: means the node to run after the current node. In the cases of branch nodes, the branches run first, and then the next runs.</li></ul><p>When a node is selected, its details show up on the right side of the graph. The details section contains the map with all node information available.</p><p>The following graph is a more complex example that has almost all of the node types and
edges (there are no failed nodes in this example):</p><div class="pathom-diagram"><p>  <img alt="Pathom Viz" src="/assets/images/graph-view-complex-ac8d2ee0ba32563b73228f49487c2e19.png"></p></div><p>You can click on a node in the graph to select it.</p><p>When you select a node, the visualization will fit that node, and the nodes connected
to it in the viewport.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="index-explorer"></a>Index Explorer<a aria-hidden="true" tabindex="-1" class="hash-link" href="#index-explorer" title="Direct link to heading">#</a></h3><p>In this panel, you can explore the attributes, resolvers, and mutations of your graph.</p><p>To learn about this, please <a href="https://blog.wsscode.com/pathom/v2/pathom/2.2.0/connect/exploration.html" target="_blank" rel="noopener noreferrer">check the previous index explorer docs</a>.
The behavior of them in Pathom 3 is the same as in Pathom 2. This view may evolve in
the future to support more of the features from Pathom 3.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="requests"></a>Requests<a aria-hidden="true" tabindex="-1" class="hash-link" href="#requests" title="Direct link to heading">#</a></h3><p>The requests tab is where you can see a log of the requests made to your environment.</p><p>This view is very much like the Query Editor, without the editing part.</p><div class="pathom-diagram"><p>  <img alt="Pathom Viz" src="/assets/images/graph-view-complex-ac8d2ee0ba32563b73228f49487c2e19.png"></p></div><p>You can see trace and graph view in the same way as in the Query Editor.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/wilkerlucio/pathom3-docs/edit/master/docs/debugging.mdx" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/async"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Async</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/indexes"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Indexes Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#repl-debug" class="table-of-contents__link">REPL debug</a><ul><li><a href="#pathom-run-stats" class="table-of-contents__link">Pathom Run Stats</a></li><li><a href="#smart-stats" class="table-of-contents__link">Smart Stats</a></li><li><a href="#error-for-some-attribute" class="table-of-contents__link">Error for some attribute</a></li></ul></li><li><a href="#debug-with-pathom-viz" class="table-of-contents__link">Debug with Pathom Viz</a><ul><li><a href="#download-the-app" class="table-of-contents__link">Download the app</a></li><li><a href="#connect-the-app" class="table-of-contents__link">Connect the app</a></li><li><a href="#query-editor" class="table-of-contents__link">Query Editor</a></li><li><a href="#tracer-view" class="table-of-contents__link">Tracer View</a></li><li><a href="#graph-view" class="table-of-contents__link">Graph View</a></li><li><a href="#index-explorer" class="table-of-contents__link">Index Explorer</a></li><li><a href="#requests" class="table-of-contents__link">Requests</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Presentations</h4><ul class="footer__items"><li class="footer__item"><a href="https://www.youtube.com/watch?v=IS3i3DTUnAI" target="_blank" rel="noopener noreferrer" class="footer__link-item">Conj 2019 - The Maximal Graph</a></li><li class="footer__item"><a href="https://www.youtube.com/watch?v=yyVKf2U8YVg" target="_blank" rel="noopener noreferrer" class="footer__link-item">Conj 2018 - Scaling Full Stack Applications</a></li><li class="footer__item"><a href="https://www.youtube.com/watch?v=r3zywlNflJI" target="_blank" rel="noopener noreferrer" class="footer__link-item">Dutch Clojure Days 2018 - Clojure Graph APIâ€™s</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://clojurians.slack.com/messages/pathom/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack</a></li></ul></div></div><div class="text--center"><div>Copyright Â© 2021 Wilker Lucio</div></div></div></footer></div>
<script src="/styles.7bd4c1d1.js"></script>
<script src="/runtime~main.20994844.js"></script>
<script src="/main.b951b7af.js"></script>
<script src="/1.2e2774a7.js"></script>
<script src="/2.8a5fdb16.js"></script>
<script src="/3.c43cf402.js"></script>
<script src="/1be78505.9817f03c.js"></script>
<script src="/43.d6df2bea.js"></script>
<script src="/935f2afb.736e8c56.js"></script>
<script src="/17896441.01d25d16.js"></script>
<script src="/b1146c8f.9a37b72d.js"></script>
</body>
</html>